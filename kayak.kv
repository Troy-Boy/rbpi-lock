#:kivy 2.3.0
#:import FadeTransition kivy.uix.screenmanager.FadeTransition
ScreenManager:
    transition: FadeTransition()
    WelcomeScreen:
    LockerNumberScreen:
    CodeEntryScreen:
    ProcessingScreen:
    ResultScreen:

<WelcomeScreen>:
    name: 'welcome'
    BoxLayout:
        orientation: 'vertical'
        padding: 50
        spacing: 20
        Label:
            text: 'Welcome to Kayak Rental'
            font_size: '32sp'
        Button:
            text: 'Start'
            font_size: '28sp'
            size_hint_y: None
            height: '80dp'
            on_press:
                root.manager.current = 'locker_number'

<LockerNumberScreen>:
    name: 'locker_number'
    locker_number: ''
    BoxLayout:
        orientation: 'vertical'
        padding: 20
        spacing: 10
        Label:
            text: 'Enter Locker Number'
            font_size: '28sp'
        TextInput:
            id: locker_input
            text: root.locker_number
            font_size: '28sp'
            size_hint_y: None
            height: '60dp'
            readonly: True
        GridLayout:
            cols: 3
            spacing: 5
            size_hint_y: None
            height: '300dp'
            Button:
                text: '1'
                on_press: root.add_digit(1)
            Button:
                text: '2'
                on_press: root.add_digit(2)
            Button:
                text: '3'
                on_press: root.add_digit(3)
            Button:
                text: '4'
                on_press: root.add_digit(4)
            Button:
                text: '5'
                on_press: root.add_digit(5)
            Button:
                text: '6'
                on_press: root.add_digit(6)
            Button:
                text: '7'
                on_press: root.add_digit(7)
            Button:
                text: '8'
                on_press: root.add_digit(8)
            Button:
                text: '9'
                on_press: root.add_digit(9)
            Button:
                text: 'Clear'
                on_press: root.clear_input()
            Button:
                text: '0'
                on_press: root.add_digit(0)
            Button:
                text: 'Next'
                on_press: root.proceed_to_code()
        Label:
            id: error_message
            text: ''
            color: (1, 0, 0, 1)
            font_size: '18sp'

<CodeEntryScreen>:
    name: 'code_entry'
    code: ''
    locker_number: ''
    BoxLayout:
        orientation: 'vertical'
        padding: 20
        spacing: 10
		 RelativeLayout:
            size_hint_y: None
            height: '80dp'

            # Banner Background and Shadow
            canvas.before:
                Color:
                    rgba: 1, 0.5, 0, 1  # Orange background color
                Rectangle:
                    pos: self.pos
                    size: self.size
                # Shadow effect
                Color:
                    rgba: 0, 0, 0, 0.2  # Black with transparency for shadow
                Rectangle:
                    pos: self.x, self.y - 5  # Slightly below the banner
                    size: self.width, 5

            # Banner Label
            Label:
                id: banner_label
                text: root.get_banner_text()
                markup: True
                font_size: '16sp'
                color: 1, 1, 1, 1  # White text color
                size_hint: 1, 1
                pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                text_size: self.width - 20, self.height - 20  # Padding inside the label
                halign: 'left'
                valign: 'middle'
        Label:
            text: 'Enter Reservation Code'
            font_size: '28sp'
        TextInput:
            id: code_input
            text: root.code
            font_size: '28sp'
            size_hint_y: None
            height: '60dp'
            readonly: True
        GridLayout:
            cols: 3
            spacing: 5
            size_hint_y: None
            height: '300dp'
            Button:
                text: '1'
                on_press: root.add_digit(1)
            Button:
                text: '2'
                on_press: root.add_digit(2)
            Button:
                text: '3'
                on_press: root.add_digit(3)
            Button:
                text: '4'
                on_press: root.add_digit(4)
            Button:
                text: '5'
                on_press: root.add_digit(5)
            Button:
                text: '6'
                on_press: root.add_digit(6)
            Button:
                text: '7'
                on_press: root.add_digit(7)
            Button:
                text: '8'
                on_press: root.add_digit(8)
            Button:
                text: '9'
                on_press: root.add_digit(9)
            Button:
                text: 'Clear'
                on_press: root.clear_input()
            Button:
                text: '0'
                on_press: root.add_digit(0)
            Button:
                text: 'Submit'
                on_press: root.submit_code()
        Label:
            id: error_message
            text: ''
            color: (1, 0, 0, 1)
            font_size: '18sp'
        Button:
            text: 'Back'
            size_hint_y: None
            height: '60dp'
            on_press:
                root.manager.current = 'locker_number'

<ProcessingScreen>:
    name: 'processing'
    BoxLayout:
        orientation: 'vertical'
        Label:
            text: 'Processing...'
            font_size: '28sp'
        ProgressBar:
            max: 1
            value: 0.5  # Placeholder for animation

<ResultScreen>:
    name: 'result'
    BoxLayout:
        orientation: 'vertical'
        padding: 50
        spacing: 20
        Label:
            id: result_message
            text: ''
            font_size: '28sp'
        Button:
            text: 'Finish'
            font_size: '24sp'
            on_press:
                root.manager.current = 'welcome'
